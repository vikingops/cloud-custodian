.. File Generated By c7n-sphinxext from source. Do not edit.

.. _aws.hostedzone:

aws.hostedzone
==============




Filters
-------


  - :ref:`config-compliance <aws.common.filters.config-compliance>`
  
  - :ref:`event <aws.common.filters.event>`
  
  - :ref:`finding <aws.common.filters.finding>`
  
  - :ref:`marked-for-op <aws.common.filters.marked-for-op>`
  
  - :ref:`ops-item <aws.common.filters.ops-item>`
  
  - :ref:`query-logging-enabled <aws.hostedzone.filters.query-logging-enabled>`

  - :ref:`reduce <aws.common.filters.reduce>`
  
  - :ref:`shield-enabled <aws.hostedzone.filters.shield-enabled>`

  - :ref:`tag-count <aws.common.filters.tag-count>`
  
  - :ref:`value <aws.common.filters.value>`
  


.. _aws.hostedzone.filters.query-logging-enabled:

query-logging-enabled
+++++++++++++++++++++
Parent base class for filters and actions.
    

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      state:
        type: boolean
      type:
        enum:
        - query-logging-enabled
    required:
    - type




Permissions - route53:GetQueryLoggingConfig, route53:GetHostedZone


.. _aws.hostedzone.filters.shield-enabled:

shield-enabled
++++++++++++++
Parent base class for filters and actions.
    

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      state:
        type: boolean
      type:
        enum:
        - shield-enabled
    required:
    - type




Permissions - shield:ListProtections




Actions
-------


  - :ref:`auto-tag-user <aws.common.actions.auto-tag-user>`
  
  - :ref:`copy-related-tag <aws.common.actions.copy-related-tag>`
  
  - :ref:`delete <aws.hostedzone.actions.delete>`

  - :ref:`invoke-lambda <aws.common.actions.invoke-lambda>`
  
  - :ref:`invoke-sfn <aws.common.actions.invoke-sfn>`
  
  - :ref:`mark-for-op <aws.common.actions.mark-for-op>`
  
  - :ref:`notify <aws.common.actions.notify>`
  
  - :ref:`post-finding <aws.common.actions.post-finding>`
  
  - :ref:`post-item <aws.common.actions.post-item>`
  
  - :ref:`put-metric <aws.common.actions.put-metric>`
  
  - :ref:`remove-tag <aws.common.actions.remove-tag>`
  
  - :ref:`set-query-logging <aws.hostedzone.actions.set-query-logging>`

  - :ref:`set-shield <aws.hostedzone.actions.set-shield>`

  - :ref:`tag <aws.common.actions.tag>`
  
  - :ref:`webhook <aws.common.actions.webhook>`
  



.. _aws.hostedzone.actions.delete:

delete
++++++
Action to delete Route 53 hosted zones.

It is recommended to use a filter to avoid unwanted deletion of R53 hosted zones.

If set to force this action will wipe out all records in the hosted zone
before deleting the zone.

:example:

.. code-block:: yaml

        policies:
          - name: route53-delete-testing-hosted-zones
            resource: aws.hostedzone
            filters:
              - 'tag:TestTag': present
            actions:
              - type: delete
                force: true

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      force:
        type: boolean
      type:
        enum:
        - delete
    required:
    - type




Permissions - route53:DeleteHostedZone


.. _aws.hostedzone.actions.set-query-logging:

set-query-logging
+++++++++++++++++
Enables query logging on a hosted zone.

By default this enables a log group per route53 domain, alternatively
a log group name can be specified for a unified log across domains.

Note this only applicable to public route53 domains, and log groups
must be created in us-east-1 region.

This action can optionally setup the resource permissions needed for
route53 to log to cloud watch logs via `set-permissions: true`, else
the cloud watch logs resource policy would need to be set separately.

Its recommended to use a separate custodian policy on the log
groups to set the log retention period for the zone logs. See
`custodian schema aws.log-group.actions.set-retention`

:example:

.. code-block:: yaml

    policies:
      - name: enablednsquerylogging
        resource: hostedzone
        region: us-east-1
        filters:
          - type: query-logging-enabled
            state: false
        actions:
          - type: set-query-logging
            state: true

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      log-group:
        default: auto
        type: string
      log-group-prefix:
        default: /aws/route53
        type: string
      set-permissions:
        type: boolean
      state:
        type: boolean
      type:
        enum:
        - set-query-logging
    required:
    - type




Permissions - route53:GetQueryLoggingConfig, route53:CreateQueryLoggingConfig, route53:DeleteQueryLoggingConfig, logs:DescribeLogGroups, logs:CreateLogGroup, logs:GetResourcePolicy, logs:PutResourcePolicy


.. _aws.hostedzone.actions.set-shield:

set-shield
++++++++++
Enable shield protection on applicable resource.

setting `sync` parameter will also clear out stale shield protections
for resources that no longer exist.

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      state:
        type: boolean
      sync:
        type: boolean
      type:
        enum:
        - set-shield
    required:
    - type




Permissions - shield:CreateProtection, shield:ListProtections

