.. File Generated By c7n-sphinxext from source. Do not edit.

.. _aws.ssm-document:

aws.ssm-document
================




Filters
-------


  - :ref:`cross-account <aws.ssm-document.filters.cross-account>`

  - :ref:`event <aws.common.filters.event>`
  
  - :ref:`finding <aws.common.filters.finding>`
  
  - :ref:`ops-item <aws.common.filters.ops-item>`
  
  - :ref:`reduce <aws.common.filters.reduce>`
  
  - :ref:`value <aws.common.filters.value>`
  


.. _aws.ssm-document.filters.cross-account:

cross-account
+++++++++++++
Filter SSM documents which have cross account permissions

:example:

.. code-block:: yaml

        policies:
          - name: ssm-cross-account
            resource: ssm-document
            filters:
              - type: cross-account
                whitelist: [xxxxxxxxxxxx]

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      actions:
        items:
          type: string
        type: array
      everyone_only:
        type: boolean
      type:
        enum:
        - cross-account
      whitelist:
        items:
          type: string
        type: array
      whitelist_conditions:
        items:
          type: string
        type: array
      whitelist_from:
        additionalProperties: 'False'
        properties:
          expr:
            oneOf:
            - type: integer
            - type: string
          format:
            enum:
            - csv
            - json
            - txt
            - csv2dict
          url:
            type: string
        required:
        - url
        type: object
      whitelist_orgids:
        items:
          type: string
        type: array
      whitelist_orgids_from:
        additionalProperties: 'False'
        properties:
          expr:
            oneOf:
            - type: integer
            - type: string
          format:
            enum:
            - csv
            - json
            - txt
            - csv2dict
          url:
            type: string
        required:
        - url
        type: object
      whitelist_vpc:
        items:
          type: string
        type: array
      whitelist_vpc_from:
        additionalProperties: 'False'
        properties:
          expr:
            oneOf:
            - type: integer
            - type: string
          format:
            enum:
            - csv
            - json
            - txt
            - csv2dict
          url:
            type: string
        required:
        - url
        type: object
      whitelist_vpce:
        items:
          type: string
        type: array
      whitelist_vpce_from:
        additionalProperties: 'False'
        properties:
          expr:
            oneOf:
            - type: integer
            - type: string
          format:
            enum:
            - csv
            - json
            - txt
            - csv2dict
          url:
            type: string
        required:
        - url
        type: object
    required:
    - type




Permissions - ssm:DescribeDocumentPermission




Actions
-------


  - :ref:`delete <aws.ssm-document.actions.delete>`

  - :ref:`invoke-lambda <aws.common.actions.invoke-lambda>`
  
  - :ref:`invoke-sfn <aws.common.actions.invoke-sfn>`
  
  - :ref:`notify <aws.common.actions.notify>`
  
  - :ref:`post-finding <aws.common.actions.post-finding>`
  
  - :ref:`post-item <aws.common.actions.post-item>`
  
  - :ref:`put-metric <aws.common.actions.put-metric>`
  
  - :ref:`set-sharing <aws.ssm-document.actions.set-sharing>`

  - :ref:`webhook <aws.common.actions.webhook>`
  



.. _aws.ssm-document.actions.delete:

delete
++++++
Delete SSM documents. Set force flag to True to force delete on documents that are
shared across accounts. This will remove those shared accounts, and then delete the document.
Otherwise, delete will fail and raise InvalidDocumentOperation exception
if a document is shared with other accounts. Default value for force is False.

:example:

.. code-block:: yaml

        policies:
          - name: ssm-delete-documents
            resource: ssm-document
            filters:
              - type: cross-account
                whitelist: [xxxxxxxxxxxx]
            actions:
              - type: delete
                force: True

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      force:
        type: boolean
      type:
        enum:
        - delete
    required:
    - type




Permissions - ssm:DeleteDocument, ssm:ModifyDocumentPermission


.. _aws.ssm-document.actions.set-sharing:

set-sharing
+++++++++++
Edit list of accounts that share permissions on an SSM document. Pass in a list of account
IDs to the 'add' or 'remove' fields to edit document sharing permissions.
Set 'remove' to 'matched' to automatically remove any external accounts on a
document (use in conjunction with the cross-account filter).

:example:

.. code-block:: yaml

        policies:
          - name: ssm-set-sharing
            resource: ssm-document
            filters:
              - type: cross-account
                whitelist: [xxxxxxxxxxxx]
            actions:
              - type: set-sharing
                add: [yyyyyyyyyy]
                remove: matched

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      add:
        items:
          type: string
        type: array
      remove:
        oneOf:
        - enum:
          - matched
        - items:
            type: string
          type: array
      type:
        enum:
        - set-sharing
    required:
    - type




Permissions - ssm:ModifyDocumentPermission

