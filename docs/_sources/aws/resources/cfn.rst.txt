.. File Generated By c7n-sphinxext from source. Do not edit.

.. _aws.cfn:

aws.cfn
=======




Filters
-------


  - :ref:`config-compliance <aws.common.filters.config-compliance>`
  
  - :ref:`event <aws.common.filters.event>`
  
  - :ref:`finding <aws.common.filters.finding>`
  
  - :ref:`json-diff <aws.cfn.filters.json-diff>`

  - :ref:`ops-item <aws.common.filters.ops-item>`
  
  - :ref:`reduce <aws.common.filters.reduce>`
  
  - :ref:`value <aws.common.filters.value>`
  


.. _aws.cfn.filters.json-diff:

json-diff
+++++++++
Compute the diff from the current resource to a previous version.

A resource matches the filter if a diff exists between the current
resource and the selected revision.

Utilizes config as a resource revision database.

Revisions can be selected by date, against the previous version, and
against a locked version (requires use of is-locked filter).

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      selector:
        enum:
        - previous
        - date
        - locked
      selector_value:
        type: string
      type:
        enum:
        - json-diff
    required:
    - type




Permissions - config:GetResourceConfigHistory




Actions
-------


  - :ref:`auto-tag-user <aws.common.actions.auto-tag-user>`
  
  - :ref:`copy-related-tag <aws.common.actions.copy-related-tag>`
  
  - :ref:`delete <aws.cfn.actions.delete>`

  - :ref:`invoke-lambda <aws.common.actions.invoke-lambda>`
  
  - :ref:`invoke-sfn <aws.common.actions.invoke-sfn>`
  
  - :ref:`notify <aws.common.actions.notify>`
  
  - :ref:`post-finding <aws.common.actions.post-finding>`
  
  - :ref:`post-item <aws.common.actions.post-item>`
  
  - :ref:`put-metric <aws.common.actions.put-metric>`
  
  - :ref:`remove-tag <aws.common.actions.remove-tag>`
  
  - :ref:`set-protection <aws.cfn.actions.set-protection>`

  - :ref:`tag <aws.common.actions.tag>`
  
  - :ref:`webhook <aws.common.actions.webhook>`
  



.. _aws.cfn.actions.delete:

delete
++++++
Action to delete cloudformation stacks

It is recommended to use a filter to avoid unwanted deletion of stacks

If you enable the `force` option, it will automatically disable
termination protection if required.  This is useful because you cannot
filter on EnableTerminationProtection since that field is only
included by AWS when the DescribeStacks API is called with a specific
stack name or id.

:example:

.. code-block:: yaml

        policies:
          - name: cloudformation-delete-failed-stacks
            resource: cfn
            filters:
              - StackStatus: ROLLBACK_COMPLETE
            actions:
              - type: delete
                force: true

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      force:
        default: false
        type: boolean
      type:
        enum:
        - delete
    required:
    - type




Permissions - cloudformation:DeleteStack, cloudformation:UpdateStack


.. _aws.cfn.actions.set-protection:

set-protection
++++++++++++++
Action to disable termination protection

It is recommended to use a filter to avoid unwanted deletion of stacks

:example:

.. code-block:: yaml

        policies:
          - name: cloudformation-disable-protection
            resource: cfn
            filters:
              - StackStatus: CREATE_COMPLETE
            actions:
              - type: set-protection
                state: False

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      state:
        default: false
        type: boolean
      type:
        enum:
        - set-protection
    required:
    - type




Permissions - cloudformation:UpdateStack

